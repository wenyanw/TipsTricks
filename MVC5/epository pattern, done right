http://blog.gauffin.org/2013/01/11/repository-pattern-done-right/
